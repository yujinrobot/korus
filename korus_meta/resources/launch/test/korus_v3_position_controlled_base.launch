<launch>
  <group ns="korus">
    <arg name="simulation" value="false"/>
    <arg name="whole_body_control" value="false"/>
    <arg name="kinematics_base" value="false"/>
    <arg name="position_controlled_base" value="true"/>
	  
	  <!-- nodelet manager -->
	  <node pkg="nodelet" type="nodelet" name="robot_core" args="manager">
	    <param name="num_worker_threads" value="4"/>
	  </node>
	  
	  <!-- goo -->
	  <include file="$(find korus_meta)/resources/launch/components/robot_core/korus_v3/goos.launch">
	    <arg name="simulation" value="$(arg simulation)"/>
      <arg name="position_controlled_base" value="$(arg position_controlled_base)"/>
	  </include>
	  
	  <!-- mechanism model -->
	  <include file="$(find korus_meta)/resources/launch/components/robot_core/korus_v3/mechanism.launch">
	    <arg name="kinematics_base" value="$(arg kinematics_base)"/>
	  </include>
	  
	  <!-- controllers -->
	  <include file="$(find korus_meta)/resources/launch/components/robot_core/korus_v3/base_controller.launch"/>
	  <include unless="$(arg whole_body_control)" file="$(find korus_meta)/resources/launch/components/robot_core/korus_v3/upper_body_controller.launch"/>
	  <include if="$(arg whole_body_control)" file="$(find korus_meta)/resources/launch/components/robot_core/korus_v3/whole_body_controller.launch">
	    <arg name="kinematics_base" value="$(arg kinematics_base)"/>
	  </include>
  </group>
</launch>