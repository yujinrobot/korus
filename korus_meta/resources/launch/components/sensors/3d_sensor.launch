<!--
  For Korus's 3D sensor; it launches:
   - openni driver
   - pointcloud throttle (to reduce CPU load)
  The "exotic" namespaces are imposed by the particular arrangements on openni launch files.
 -->

<launch>
<!--   <rosparam file="$(find korus_meta)/resources/yaml/sensors/kinect.yaml" command="load" ns="/kinect/driver"/> -->

  <!-- Load standard constellation of processing nodelets -->
  <include file="$(find openni_launch)/launch/openni.launch" ns="/">
    <arg name="camera" value="sensor_3d"/>
    <arg name="publish_tf" value="false"/>
    <param name="num_worker_threads" value="6"/> <!-- throttle, octomap, tabletop_segmentor, ... -->
  </include>

  <!--  ************ Point cloud throttling ********  -->
  <node pkg="nodelet" type="nodelet" name="pointcloud_throttle"
        args="load pointcloud_to_laserscan/CloudThrottle ensor_3d_nodelet_manager" respawn="false">
    <param name="max_rate" value="5.0"/>
    <remap from="cloud_in"  to="sensor_3d/depth/points"/>
    <remap from="cloud_out" to="pointcloud"/>
  </node>
</launch>